---
date: 1726439787.768233
tags:
- autogenerated
- source__oai
- conversation_id__66e757d1-0534-8008-bb6a-afa8342b5ee2
- msg_aaa2e613-c2e5-4165-924e-a9f45a220fc1
- msg_e57972e0-46e0-4089-96a2-ca56b7c202c9
- colorclass/edge-case
title: introduce conditional control flow. this includes parenthetical syntax, compound
  expressions (don't call it that, just show the student that it's a thing they can
  do). also introduce the `in` operator
---

**USER**

introduce conditional control flow. this includes parenthetical syntax, compound expressions (don't call it that, just show the student that it's a thing they can do). also introduce the `in` operator for strings.


**ASSISTANT**

Excellent! This is a great opportunity to introduce **conditional control flow** with `if-else` statements, showing how students can make decisions in their code based on certain conditions. We’ll also casually introduce **compound expressions** (like combining conditions with `and`, `or`) and the `in` operator for checking whether a substring is present in a string.

In this lesson, we’ll expand on the previous script by adding conditionals to check for certain values in the prompts, allowing students to customize behavior based on specific conditions.

---

### **Sixth Assignment: Conditional Control Flow and String Checks**

### **Objective**:
- Introduce students to basic **conditional control flow** (`if`, `else`).
- Show how to use **parenthetical syntax** for more complex conditions (without getting bogged down in terminology).
- Teach them the **`in` operator** to check if a substring is present in a string.

### **Concept**:
In this assignment, students will check if the prompt contains specific keywords like `"landmarks"` or `"population"`, and handle the prompts differently based on those conditions. They’ll also combine conditions using `and` and `or`.

---

### **Updated Script: Conditional Control Flow and String Checks**

```python
import os
import openai
import fire

# Step 1: Fetch API key from environment variables
api_key = os.environ.get("OPENAI_API_KEY")
if not api_key:
    raise ValueError("API key not found. Set the OPENAI_API_KEY environment variable.")

# Step 2: Define a function that queries GPT with a list of modified prompts
def query_gpt(prompts, max_tokens=50, temperature=0.7, top_p=1.0):
    openai.api_key = api_key
    response = openai.Completion.create(
        model="text-davinci-003",
        prompt=prompts,  # Send the list of modified prompts
        max_tokens=max_tokens,
        temperature=temperature,
        top_p=top_p,
    )
    return response

# Step 3: Add CLI using Fire
def main(city="Paris"):
    """
    Modify prompts based on the city, and use conditionals to customize behavior.

    Arguments:
    - city: The city name to replace the <city> placeholder.
    """
    # Step 4: Define a list of prompts with a placeholder <city>
    prompts = [
        "What is the population of <city>?",
        "What are some famous landmarks in <city>?",
        "Can you tell me an interesting fact about <city>?",
        "What are the most famous foods in <city>?"
    ]

    # Step 5: Replace the <city> placeholder and introduce conditionals
    modified_prompts = []
    for prompt in prompts:
        modified_prompt = prompt.replace("<city>", city)

        # Check if the prompt contains "population" or "landmarks"
        if "population" in modified_prompt:
            print("Found a population-related prompt.")
        elif "landmarks" in modified_prompt:
            print("Found a landmarks-related prompt.")
        
        # Combine conditions using `and`/`or` (compound expression)
        if "famous" in modified_prompt and "foods" in modified_prompt:
            print("Found a prompt about famous foods!")
        
        # Add the modified prompt to the list
        modified_prompts.append(modified_prompt)

    # Step 6: Call the query_gpt function with the modified prompts
    response = query_gpt(modified_prompts)

    # Step 7: Print the raw response object (students will learn how to parse it later)
    print(response)

if __name__ == "__main__":
    fire.Fire(main)
```

---

### **Explanation**:

1. **Step 1**: Fetch the API key from the environment as before.

2. **Step 2**: The `query_gpt()` function remains unchanged.

3. **Step 3**: The `main()` function allows the user to specify a city name, which will replace the `<city>` placeholder in each prompt.

4. **Step 4**: The list of prompts now includes a variety of topics, including `"population"`, `"landmarks"`, and `"famous foods"`. 

5. **Step 5**: This is where the **conditional logic** is introduced:
   - We replace `<city>` with the given city name.
   - The `in` operator checks if a certain substring exists in the modified prompt:
     ```python
     if "population" in modified_prompt:
         print("Found a population-related prompt.")
     elif "landmarks" in modified_prompt:
         print("Found a landmarks-related prompt.")
     ```
   - **Compound expressions** (without calling them that): We combine conditions with `and` to check for both `"famous"` and `"foods"` in the same prompt:
     ```python
     if "famous" in modified_prompt and "foods" in modified_prompt:
         print("Found a prompt about famous foods!")
     ```
   - This introduces the `and` operator, showing that you can combine conditions.

6. **Step 6**: The modified prompts are passed to the `query_gpt()` function as before.

7. **Step 7**: The full API response object is printed (same as previous assignments).

---

### **Running the Script**:

Students can run the script, specifying a city via the command line:

```bash
python hello_gpt_conditionals.py --city "Rome"
```

**Example Output**:
```bash
Found a population-related prompt.
Found a landmarks-related prompt.
Found a prompt about famous foods!
<OpenAIObject completion id=cmpl-xxxxxxxxxxxxxxxxx>
```

The output will indicate which prompts matched the conditions (e.g., population, landmarks, or famous foods) based on the `in` checks.

---

### **Learning Outcomes**:

1. **Conditional Control Flow**:
   - Students learn to make decisions in their code using `if`, `elif`, and `else`.
   - They'll see how to handle different conditions based on the content of a string (like checking for keywords in prompts).

2. **The `in` Operator**:
   - Students are introduced to the `in` operator, which checks whether a substring exists within a string.
   - They'll learn how this is useful for dynamically modifying behavior based on the presence of keywords in text.

3. **Parenthetical Syntax and Combining Conditions**:
   - Without diving too deep into terminology, students will see how they can use parentheses and combine multiple conditions using `and` or `or`:
     ```python
     if "famous" in modified_prompt and "foods" in modified_prompt:
     ```
   - This lays the foundation for more advanced control flow later on.

4. **String Manipulation**:
   - This assignment continues the use of `str.replace()` from the previous lesson, reinforcing how string substitution can be combined with conditional logic to create dynamic, context-aware prompts.

---

### **Assignment Extension (Optional)**:

For an optional challenge, ask students to add an `else` clause to handle any prompts that don’t match the `"population"`, `"landmarks"`, or `"foods"` conditions. For example:
```python
else:
    print("This is a general prompt.")
```

They can run:
```bash
python hello_gpt_conditionals.py --city "Tokyo"
```

---

### **Summary**:

In this assignment, students are introduced to **conditional control flow** and the **`in` operator**, learning how to make decisions based on string content. They also see how to combine conditions using `and` in a natural, practical context. The focus remains on practical usage, and these concepts will continue to build as they develop more complex prompt handling strategies.


---

preceding: [[ok great, much better. you've got the idea. next, introduce string substitution. this will also introduce `for` but don't make a big deal about it. just casually illustrate looping over the list so we]]  


following: [[encourage the student to wrap conditions in parens to mitigate confusion about order of operations. we're not going to discuss order of operations so may as well introduce a mechanism to make it less]]