---
date: 1726437970.609198
tags:
- autogenerated
- source__oai
- conversation_id__66e757d1-0534-8008-bb6a-afa8342b5ee2
- msg_aaa2ba87-5f56-4d07-bc2c-5f45109feb72
- msg_92c519bf-3cdb-4bd9-8ff1-056b9662b251
- colorclass/edge-case
title: add a simple cli using `fire` and make the second assignment passing in a prompt
  parameter
---

**USER**

add a simple CLI using `fire` and make the second assignment passing in a prompt parameter


**ASSISTANT**

Great! Adding a CLI using the `fire` library will help students create more flexible and interactive Python scripts while keeping things simple. Using `fire` allows students to pass a custom prompt directly via the command line, which makes the program more versatile.

### **Updated Plan: Hello World CLI with OpenAI API**

### 1. **Install Required Libraries**

Before getting started, have students install the `openai` and `fire` packages:
```bash
pip install openai fire
```

### 2. **First Assignment: Simple Hello World CLI with a Default Prompt**

In this first assignment, students will create a Python script that uses `fire` to run a simple command-line interface (CLI). The script will default to sending a "Hello, world!" prompt, but it can later be extended to accept user inputs via CLI arguments.

Here’s the basic version of the script:

```python
import os
import openai
import fire

# Step 1: Fetch API key from environment variables
api_key = os.environ.get("OPENAI_API_KEY")
if not api_key:
    raise ValueError("API key not found. Set the OPENAI_API_KEY environment variable.")

# Step 2: Define a function that queries GPT with a prompt
def query_gpt(prompt="Hello, world!"):
    openai.api_key = api_key
    response = openai.Completion.create(
        model="text-davinci-003",
        prompt=prompt,
        max_tokens=50
    )
    return response.choices[0].text.strip()

# Step 3: Add CLI using Fire
def main(prompt="Hello, world!"):
    """CLI for interacting with OpenAI GPT-3."""
    response_text = query_gpt(prompt)
    print(f"AI Response: {response_text}")

if __name__ == "__main__":
    fire.Fire(main)
```

### **Running the Script**:

To run the script with the default `"Hello, world!"` prompt, students simply execute:

```bash
python hello_gpt_cli.py
```

The script will return a response from the GPT model.

### **Learning Outcomes from the First Assignment**:
- **Intro to `fire`**: Students learn to create a CLI with Python's `fire` library, which automatically creates the interface from the function parameters.
- **Modularity**: The separation of the `query_gpt` function and `fire` allows flexibility for future improvements.

---

### **Second Assignment: Passing a Prompt via CLI**

The second assignment will build on the first by allowing students to pass a custom prompt via the command line using `fire`. They will modify their CLI to accept a `prompt` argument directly from the command line, and the default will remain `"Hello, world!"` if no custom prompt is provided.

### **Updated Script with CLI Prompt Parameter**:

```python
import os
import openai
import fire

# Step 1: Fetch API key from environment variables
api_key = os.environ.get("OPENAI_API_KEY")
if not api_key:
    raise ValueError("API key not found. Set the OPENAI_API_KEY environment variable.")

# Step 2: Define a function that queries GPT with a prompt
def query_gpt(prompt="Hello, world!"):
    openai.api_key = api_key
    response = openai.Completion.create(
        model="text-davinci-003",
        prompt=prompt,
        max_tokens=50
    )
    return response.choices[0].text.strip()

# Step 3: Add CLI using Fire
def main(prompt="Hello, world!"):
    """CLI for interacting with OpenAI GPT-3."""
    response_text = query_gpt(prompt)
    print(f"AI Response: {response_text}")

if __name__ == "__main__":
    fire.Fire(main)
```

### **Running the Script with Custom Prompts**:

- With a default `"Hello, world!"` prompt (as before):
  ```bash
  python hello_gpt_cli.py
  ```

- With a custom prompt passed as a CLI argument:
  ```bash
  python hello_gpt_cli.py --prompt "Tell me a joke about cats."
  ```

### **Second Assignment Requirements**:
1. **Run the Script with Custom Prompts**: Have students pass in different prompts to explore how GPT responds. Example:
   ```bash
   python hello_gpt_cli.py --prompt "What is the capital of France?"
   ```

2. **Modify the `max_tokens` Parameter** (Optional): Students can add an extra parameter like `max_tokens` to the CLI to give them more control over the response length:
   ```python
   def query_gpt(prompt="Hello, world!", max_tokens=50):
       openai.api_key = api_key
       response = openai.Completion.create(
           model="text-davinci-003",
           prompt=prompt,
           max_tokens=max_tokens
       )
       return response.choices[0].text.strip()

   def main(prompt="Hello, world!", max_tokens=50):
       """CLI for interacting with OpenAI GPT-3."""
       response_text = query_gpt(prompt, max_tokens)
       print(f"AI Response: {response_text}")
   ```

   Students can now control both the prompt and the token limit from the command line:
   ```bash
   python hello_gpt_cli.py --prompt "Tell me a fact about space." --max_tokens 20
   ```

### **Learning Outcomes from the Second Assignment**:
- **CLI Development with `fire`**: Students learn how to extend the CLI by passing additional parameters like the `prompt`, making the script more interactive and flexible.
- **Dynamic User Input**: They understand how to process dynamic input and adapt the API call accordingly, which mirrors real-world agent engineering tasks.
- **Prompt Engineering (continued)**: By passing in various prompts via CLI, students start exploring prompt engineering further—seeing how different phrasings affect the model's response.

---

### **Summary**:
These two assignments focus on getting students comfortable with interacting with an API-hosted model and introduce basic prompt engineering. By using `fire`, they’ll also learn to build simple and user-friendly CLI tools, which will be useful for future projects. 

This approach keeps things simple, but flexible enough for students to start experimenting with different prompts, making the "Hello World" task both practical and engaging.


---

preceding: [[start simple and practical. this is a hello world assignment, we're not asking them to re-invent the wheel. `import openai` and get config arguments via `os.environ.get`]]  


following: [[third assignment experimenting with sampling parameters]]