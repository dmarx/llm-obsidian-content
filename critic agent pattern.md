---
date: 1726442125.134979
tags:
- autogenerated
- source__oai
- conversation_id__66e757d1-0534-8008-bb6a-afa8342b5ee2
- msg_34ec28c2-c99f-4017-9a57-2e37d7d3461d
- msg_aaa26ac8-551a-449b-8dba-551f0025a1f1
- msg_6c46dd06-31d9-4ec1-a616-43f912e32924
- colorclass/decision-making-processes
title: critic agent pattern
---

**ASSISTANT**

. **Modular Design**: By breaking down tasks into specialized agents, students will see how modularity improves flexibility and scalability.
4. **Task Matching Logic**: The **Delegator Agent** shows how to design logic that matches user input with the right agent, demonstrating how complex tasks can be simplified by dividing responsibilities.

---

### **Assignment Extension Ideas**:

1. **Multi-Agent Collaboration**: Allow multiple agents to collaborate on a single task. For example, the Research Agent could gather facts, the Writing Agent could turn them into a narrative, and the Editor Agent could refine the final text.
   
2. **Task Chaining**: Implement a more complex delegator that can chain tasks. For instance, after the Research Agent finishes its task, the Writing Agent can use the research output to generate a report.

3. **User-Specified Agents**: Allow the user to specify which agent should handle the task (e.g., “Ask the editor to review this text.”).

---

### **Summary**:

In this assignment, students implement the **Delegator Agent Pattern**, which delegates tasks to specialized agents based on the user's input. This pattern introduces modular design principles and task delegation, helping students understand how to build systems that are flexible, maintainable, and scalable by breaking down complex tasks into specialized components. By completing this assignment, students will learn how to create agent-based systems that collaborate to deliver more accurate and domain-specific results.


**USER**

Critic Agent pattern


**ASSISTANT**

### **Assignment: Implementing the Critic Agent Pattern**

In this assignment, students will learn to implement the **Critic Agent** pattern. The **Critic Agent** is responsible for evaluating, providing feedback, and offering suggestions for improvement on the output of another agent. This pattern can be particularly useful in tasks that involve creative work (e.g., writing, code generation, design) or in situations where the quality or correctness of the output is subjective.

### **Objective**:
1. Teach students how to create a **Critic Agent** that evaluates and provides feedback on the output of another agent.
2. Demonstrate how the **Critic Agent** can enhance collaboration by reviewing, improving, or suggesting changes to another agent’s response.
3. Show how the **Critic Agent** can work in conjunction with other agents to improve the quality of results.

---

### **What Is the Critic Agent?**

The **Critic Agent** is a specialized agent that evaluates the output of another agent and provides:
1. **Feedback**: Suggestions for improvement, clarity, or style.
2. **Criticism**: Points out weaknesses, inaccuracies, or areas that need further elaboration.
3. **Revisions**: Optional improvements or refinements to the original output, depending on its quality.

#### **Common Use Cases**:
- **Creative Writing**: The Critic Agent evaluates the style, tone, and engagement of a story written by another agent and suggests improvements.
- **Code Review**: The Critic Agent provides feedback on the quality, efficiency, or correctness of code generated by another agent.
- **Content Editing**: The Critic Agent reviews articles, essays, or reports to ensure clarity, coherence, and professionalism.

---

### **Step 1: Creating a Critic Agent**

The **Critic Agent** will take the output of another agent, analyze it, and provide feedback. We can extend the existing `Agent` class to handle this role, with a specialized system prompt that focuses on providing constructive criticism.

#### **Critic Agent Implementation**:

```python
class CriticAgent(Agent):
    def __init__(self, name, system_prompt_template):
        """
        Initialize the Critic Agent with a system prompt template focused on evaluation.
        """
        super().__init__(name, system_prompt_template)
    
    def critique(self, response_to_critique, max_tokens=100, temperature=0.7, top_p=1.0, **kwargs):
        """
        Critique the output from another agent by analyzing and providing feedback.
        
        Arguments:
        - response_to_critique: The output from another agent to critique.
        """
        # Generate the critique prompt for the Critic Agent
        critique_input = f"Critique the following response: '{response_to_critique}'"
        
        # Append the critique input to the Critic Agent's history
        self.history.append({"role": "user", "content": critique_input})
        
        # Send the critique input to the OpenAI API using the Critic Agent's system prompt
        return self.query_openai(user_input=critique_input, max_tokens=max_tokens, temperature=temperature, top_p=top_p, **kwargs)
```

---

### **Step 2: Defining Specialized Agents for the Collaboration**

We need agents that will provide the initial output for the **Critic Agent** to critique. We'll reuse specialized agents from previous assignments, such as a **Writing Agent** and an **Editor Agent**. The **Critic Agent** will then analyze their responses and provide feedback.

#### **Defining System Prompts for the Agents**:

```python
# System prompts for specialized agents
writing_prompt = "You are a creative writing assistant. Respond with imaginative and creative writing."
editor_prompt = "You are an editor. Review the provided text and suggest improvements."
critic_prompt = "You are a critic. Provide constructive feedback and suggest improvements to the following content."

# Create instances of specialized agents
writing_agent = Agent(name="WritingAgent", system_prompt_template=writing_prompt)
editor_agent = Agent(name="EditorAgent", system_prompt_template=editor_prompt)
critic_agent = CriticAgent(name="CriticAgent", system_prompt_template=critic_prompt)
```

---

### **Step 3: Implementing the Critic-Agent Collaboration**

Next, we’ll create a **Conversation Manager** that coordinates between the **Writing Agent** (or any primary agent) and the **Critic Agent**. The **Critic Agent** will receive the output from the **Writing Agent** and provide feedback on its quality.

#### **Conversation Manager**:

```python
class ConversationManager:
    def __init__(self):
        self.agents = {}

    def add_agent(self, name, agent):
        """
        Add a new agent to the system.
        """
        self.agents[name] = agent
    
    def get_agent(self, name):
        """
        Retrieve an agent by name.
        """
        return self.agents.get(name)

    def interact_with_agent(self, agent_name, user_input):
        """
        Interact with the specified agent and get their response.
        """
        agent = self.get_agent(agent_name)
        if not agent:
            return f"No agent found with the name {agent_name}."
        
        return agent.query_openai(user_input)
    
    def critique_response(self, primary_agent_name, user_input):
        """
        Get a response from the primary agent, then pass it to the Critic Agent for feedback.
        """
        primary_agent = self.get_agent(primary_agent_name)
        critic_agent = self.get_agent("CriticAgent")
        
        if not primary_agent or not critic_agent:
            return "Error: One or both agents not found."
        
        # Step 1: Get the response from the primary agent (e.g., Writing Agent)
        primary_response = primary_agent.query_openai(user_input)
        
        # Step 2: Have the Critic Agent critique the primary agent's response
        critique_response = critic_agent.critique(primary_response)
        
        return primary_response, critique_response
```

---

### **Step 4: Creating the CLI Interface for Critic Collaboration**

Now, we’ll implement a CLI interface where the user can request a response from an agent (e.g., **Writing Agent**) and then have the **Critic Agent** review the response.

```python
def critic_cli():
    # Create the conversation manager
    conversation_manager = ConversationManager()

    # Add agents to the conversation manager
    conversation_manager.add_agent("WritingAgent", writing_agent)
    conversation_manager.add_agent("EditorAgent", editor_agent)
    conversation_manager.add_agent("CriticAgent", critic_agent)

    print("Welcome to the Critic Agent system!\n")

    while True:
        print("Options:")
        print("1. Get a response from the Writing Agent.")
        print("2. Get a response from the Writing Agent and have the Critic Agent review it.")
        print("Type 'exit' to quit.\n")

        option = input("Enter your choice (1 or 2): ").strip()

        if option == "exit":
            break

        user_input = input("You: ")

        if option == "1":
            # Get a response from the Writing Agent only
            response = conversation_manager.interact_with_agent("WritingAgent", user_input)
            print(f"WritingAgent: {response}")

        elif option == "2":
            # Get a response from the Writing Agent and have it critiqued by the Critic Agent
            original_response, critique_response = conversation_manager.critique_response("WritingAgent", user_input)
            print(f"WritingAgent: {original_response}")
            print(f"CriticAgent: {critique_response}")
        
        else:
            print("Invalid option. Please try again.")

# Run the CLI
if __name__ == "__main__":
    critic_cli()
```

---

### **Step 5: Running the Critic Agent System**

When the user interacts with the **Writing Agent**, they can choose to get feedback from the **Critic Agent**. The **Critic Agent** will evaluate the response, offer suggestions for improvement, and provide feedback.

#### **Example Interaction**:

```bash
Welcome to the Critic Agent system!

Options:
1. Get a response from the Writing Agent.
2. Get a response from the Writing Agent and have the Critic Agent review it.
Type 'exit' to quit.

Enter your choice (1 or 2): 2
You: Write a short story about a brave knight.
WritingAgent: Once upon a time, in a distant kingdom, there lived a brave knight who was known for his courage and honor...
CriticAgent: The story is engaging but could benefit from more descriptive language. For example, you could describe the knight's appearance and his emotional struggles.
```

### **Explanation**:

1. **Writing Agent**: Provides the initial creative content (e.g., a story or article).
2. **Critic Agent**: Reviews the output from the Writing Agent and provides constructive feedback, suggesting improvements in clarity, tone, or style.

---

### **Step 6: Extending the Critic Pattern**

1. **Multi-Agent Critiques**: Allow multiple Critic Agents with different expertise (e.g., a **Writing Critic**, a **Code Critic**, or a **Design Critic**) to evaluate different types of outputs.
2. **Revision Suggestions**: Extend the Critic Agent to not only critique the response but also offer alternative versions or rewrite problematic sections.
3. **Task-Specific Criticism**: Tailor the Critic Agent to offer specific types of feedback (e.g., grammatical feedback, style advice, or logic improvement).

---

### **Learning Outcomes**:

1. **Evaluation and Feedback**: Students learn how to implement agents that not only generate content but also evaluate and provide feedback on the quality of that content.
2. **Critique Collaboration**


---

preceding: [[start with the delegator next]]  


following: [[introduce an example of an inter-agent conflict in the context of the agents the student has already created from previous assignments, and use this example to motivate the introduction and implementa]]