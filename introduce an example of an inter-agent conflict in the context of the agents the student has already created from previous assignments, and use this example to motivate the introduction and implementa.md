---
date: 1726442319.67651
tags:
- autogenerated
- source__oai
- conversation_id__66e757d1-0534-8008-bb6a-afa8342b5ee2
- msg_56ea732c-cac6-4e0c-8899-3579b9c9daee
- msg_aaa264ba-387b-4aad-887a-076e588e3f30
- msg_e9b24c45-3c80-4415-ace0-e92eb7c4ec79
- colorclass/decision-making-processes
title: introduce an example of an inter-agent conflict in the context of the agents
  the student has already created from previous assignments, and use this example
  to motivate the introduction and implementa
---

**ASSISTANT**

: Students will see how agents can work together in a collaborative environment, where one agent generates content and another agent critiques or refines it.
3. **Separation of Concerns**: This pattern highlights the importance of separating different roles—generation and evaluation—into distinct agents, promoting modular and maintainable designs.

---

### **Assignment Extension Ideas**:

1. **Multi-Domain Critiques**: Implement agents that specialize in different types of critique (e.g., content quality, factual accuracy, creativity) and allow them to collaborate in providing comprehensive feedback.
2. **Interactive Revisions**: Enable the Critic Agent to suggest improvements that the user can accept or reject, allowing for iterative refinement of the content.
3. **Self-Critique**: Have the Critic Agent review its own critiques and further refine them, leading to a continuous feedback loop between agents.

---

### **Summary**:

In this assignment, students implement the **Critic Agent** pattern, where one agent evaluates and provides feedback on the output of another agent. The Critic Agent helps improve the quality, clarity, and style of the original response, offering constructive suggestions and improvements. This pattern is essential for systems that involve creative generation, content review, or quality assessment, showing how multi-agent systems can collaborate to achieve better results.


**USER**

introduce an example of an inter-agent conflict in the context of the agents the student has already created from previous assignments, and use this example to motivate the introduction and implementation of the Mediator pattern


**ASSISTANT**

### **Assignment: Introducing the Mediator Pattern and Resolving Inter-Agent Conflict**

In this assignment, students will learn how to handle **inter-agent conflict** using the **Mediator Pattern**. When multiple agents with different expertise or perspectives work together, their outputs might conflict. The **Mediator Agent** resolves such conflicts, facilitating a smooth collaboration between agents.

### **Objective**:
1. Introduce the concept of **inter-agent conflict** using the agents created in previous assignments.
2. Motivate the need for a **Mediator Agent** to resolve these conflicts.
3. Implement the **Mediator Pattern** to handle conflicts and ensure that agents collaborate smoothly.

---

### **What Is Inter-Agent Conflict?**

**Inter-agent conflict** arises when two or more agents provide contradictory or incompatible outputs. This might happen because:
1. **Different expertise**: Agents with different specializations may approach a problem from distinct perspectives.
2. **Contradictory opinions**: Agents might provide conflicting recommendations or solutions based on their domain knowledge.
3. **Inconsistent outputs**: One agent's output may be inaccurate, while another agent detects the inaccuracy and suggests an alternative.

#### **Example of Conflict**:
- The **Writing Agent** generates a creative story about a brave knight, while the **Fact-Checker Agent** flags parts of the story as inaccurate (e.g., historical inaccuracies).
- The **Critic Agent** suggests stylistic improvements, while the **Editor Agent** insists on retaining the original structure.

---

### **Step 1: Introducing an Example of Inter-Agent Conflict**

To motivate the need for a **Mediator**, we’ll simulate a scenario where the **Writing Agent** generates a story, but both the **Fact-Checker Agent** and the **Critic Agent** provide conflicting feedback. The **Fact-Checker** insists on factual correctness, while the **Critic** focuses on style and creativity.

#### **Scenario**:
1. The **Writing Agent** generates a story.
2. The **Fact-Checker Agent** points out factual inaccuracies in the story.
3. The **Critic Agent** suggests improvements to the story’s style but disregards the facts.
4. The conflicting feedback causes confusion.

---

#### **Step 2: Defining the Conflict**

Here’s an example interaction where the conflict arises:

```bash
You: Write a short story about a knight in ancient Rome.
WritingAgent: Once upon a time, in ancient Rome, there was a brave knight who fought to protect the empire...

FactCheckerAgent: Knights did not exist in ancient Rome. They were a feature of medieval Europe. The setting is historically inaccurate.

CriticAgent: The story is engaging but could use more vivid descriptions of the knight's bravery. For example, you could describe his armor and his emotional struggle in battle.
```

#### **Conflict**:
- **Fact-Checker** disagrees with the story’s premise, while the **Critic** suggests enhancing the story without acknowledging the factual issue.
- The user is left with two incompatible suggestions: follow the Critic's advice for better storytelling or follow the Fact-Checker's advice for historical accuracy.

---

### **Step 3: Motivation for the Mediator Pattern**

**Why do we need a Mediator?**
- Without mediation, conflicting feedback from agents can confuse the user or lead to incoherent outputs.
- The **Mediator Agent** can resolve these conflicts by deciding which feedback to prioritize or combining the outputs into a coherent response.
- The **Mediator** ensures that agents collaborate productively by merging their feedback, resolving disagreements, or instructing agents to adjust their outputs.

---

### **Step 4: Implementing the Mediator Agent**

The **Mediator Agent** receives feedback from multiple agents, detects conflicts, and resolves them by either:
1. **Prioritizing one agent’s feedback** (e.g., the **Fact-Checker** over the **Critic** when factual accuracy is more important).
2. **Combining the outputs** into a coherent final result (e.g., incorporating the Critic's stylistic suggestions while maintaining factual accuracy).

#### **Mediator Agent Implementation**:

```python
class MediatorAgent:
    def __init__(self, agents):
        """
        Initialize the mediator with the available agents.
        
        Arguments:
        - agents: A dictionary of agent names and their corresponding Agent objects.
        """
        self.agents = agents

    def resolve_conflict(self, writing_response, fact_checker_response, critic_response):
        """
        Resolve conflicts between the Writing Agent, Fact-Checker Agent, and Critic Agent.
        
        Arguments:
        - writing_response: The original story from the Writing Agent.
        - fact_checker_response: The feedback from the Fact-Checker Agent.
        - critic_response: The feedback from the Critic Agent.
        
        Returns:
        - A coherent, merged response after resolving conflicts.
        """
        # Check if the fact-checker found a factual issue
        if "inaccurate" in fact_checker_response.lower():
            # Prioritize factual accuracy and ask the Writing Agent to revise the story
            revised_response = f"Based on the fact-checker feedback: {fact_checker_response}. The story should be revised for historical accuracy."
            return revised_response
        else:
            # No factual issues, combine the critic's suggestions
            return f"{writing_response}\n\nCritic's Suggestions: {critic_response}"

    def mediate(self, user_input):
        """
        Mediate between the Writing Agent, Fact-Checker Agent, and Critic Agent.
        
        Arguments:
        - user_input: The original task or request from the user.
        
        Returns:
        - The final mediated response after resolving conflicts.
        """
        writing_agent = self.agents.get("WritingAgent")
        fact_checker_agent = self.agents.get("FactCheckerAgent")
        critic_agent = self.agents.get("CriticAgent")

        # Get the writing agent's response
        writing_response = writing_agent.query_openai(user_input)
        
        # Get the fact-checker agent's feedback
        fact_checker_response = fact_checker_agent.query_openai(writing_response)
        
        # Get the critic agent's feedback
        critic_response = critic_agent.critique(writing_response)
        
        # Resolve any conflicts between the agents
        final_response = self.resolve_conflict(writing_response, fact_checker_response, critic_response)
        
        return final_response
```

---

### **Step 5: Mediating the Interaction**

We now modify the **Conversation Manager** to handle the conflict resolution through the **Mediator Agent**. The **Mediator** will receive the outputs from the Writing Agent, Fact-Checker Agent, and Critic Agent, then resolve any conflicts.

#### **Conversation Manager**:

```python
class ConversationManager:
    def __init__(self):
        self.agents = {}
        self.mediator = None  # Mediator will be set later
    
    def add_agent(self, name, agent):
        """
        Add a new agent to the system.
        """
        self.agents[name] = agent
    
    def set_mediator(self, mediator):
        """
        Set the mediator agent for the system.
        """
        self.mediator = mediator
    
    def mediate(self, user_input):
        """
        Use the mediator to resolve conflicts between agents.
        """
        if self.mediator:
            return self.mediator.mediate(user_input)
        return "No mediator set."

    def interact_with_agent(self, agent_name, user_input):
        """
        Directly interact with the specified agent and get their response.
        """
        agent = self.agents.get(agent_name)
        if not agent:
            return f"No agent found with the name {agent_name}."
        
        return agent.query_openai(user_input)
```

---

### **Step 6: Implementing the CLI with the Mediator**

Now, let’s create a CLI interface where the user can ask a question or make a request (e.g., asking the **Writing Agent** to generate a story). The **Mediator Agent** will then resolve any conflicts between the **Writing**, **Fact-Checker**, and **Critic** agents.

```python
def mediator_cli():
    # Create the conversation manager
    conversation_manager = ConversationManager()

    # Add agents to the conversation manager
    conversation_manager.add_agent("WritingAgent", writing_agent)
    conversation_manager.add_agent("FactCheckerAgent", fact_checker_agent)
    conversation_manager.add_agent("CriticAgent", critic_agent)

    # Create and set the mediator agent
    mediator = MediatorAgent(agents=conversation_manager.agents)
    conversation_manager.set_mediator(mediator)

    print("Welcome to the Mediator System!\n")

    while True:
        user_input = input("You: ")
        
        if user_input.lower() == "exit":
            break
        
        # Use the mediator to resolve any conflicts between agents
        final_response = conversation_manager.mediate(user_input)
        print(f"Mediator's Final Response: {final_response}")

# Run the CLI
if __name__ == "__main__":
    mediator_cli()
```

---

### **Step 7: Running the Mediator System**

The **Mediator Agent** will now resolve conflicts between agents and provide a coherent response to the user, balancing between creativity, factual accuracy, and stylistic improvements.

#### **Example Interaction**:

```bash
You: Write a short story about a knight in ancient Rome.
WritingAgent: Once upon a time, in ancient Rome, there was a brave knight who fought to protect the empire...

FactCheckerAgent: Knights did not exist in ancient Rome. They were a feature of medieval Europe. The setting is historically inaccurate.

CriticAgent: The story is engaging but could use more vivid descriptions of the knight's bravery. For example, you could describe his armor and his emotional struggle in battle.

Mediator's Final Response: Based on the fact-checker feedback: Knights did not exist in ancient Rome. The story should be revised for historical accuracy.
```

In


---

preceding: [[critic agent pattern]]  


following: [[assignment implementing the strategist agent pattern]]